# L2J Coordinator

Библиотека/утилита для построения координат прямоугольной сетки по двум точкам с поддержкой координат X, Y, Z и heading. Вывод результата — в формате JSON.  
Разработана для генерации точек спауна мобов в инстансах для l2j. 

## Возможности
- Построение прямоугольника по двум опорным точкам
- Разбиение на строки и столбцы (ячейки) с вычислением центров
- Единый Z и heading для всех точек результата
- **Современный Java код** — использование record'ов для неизменяемых данных
- **Простой вывод** — весь вывод через `System.out/err` без внешних зависимостей


## Требования
- Java 17+
- Gradle 8+

## Сборка
Linux/macOS
```bash
./gradlew build
```
Windows
```bash
.\gradlew.bat build
```

## Запуск

### Интерактивный режим (рекомендуется)
Linux/macOS
```bash
./gradlew run
```
Windows
```bash
.\gradlew.bat run
```
Приложение запросит по порядку:
1) `Enter x,y point 1:` — координаты первой точки (x,y)
2) `Enter x,y point 2:` — координаты второй точки (x,y)
3) `Enter z,heading:` — Z и heading (z,heading)
4) `Columns:` — количество столбцов
5) `Rows:` — количество строк



### Режим отладки
Для включения дополнительной отладочной информации используйте флаг `--debug`:

```bash
./gradlew run --args="--debug"
```

В режиме отладки приложение выводит детальную информацию о процессе построения координат:
- Инициализация сервисов
- Процесс чтения входных параметров
- Начало построения с указанием размеров сетки
- Количество успешно построенных координат
- Процесс генерации JSON-вывода

Все отладочные сообщения помечаются префиксом `[DEBUG]` для удобства идентификации.

## Пример вывода

Результат работы приложения выводится в консоль через `System.out`:

```
Начинаем вывод 25 координат в JSON формате
Starting to output 25 coordinates in JSON format
[
    {"x": 10, "y": 10, "z": 1000, "heading": 0},
    {"x": 30, "y": 10, "z": 1000, "heading": 0},
    {"x": 50, "y": 10, "z": 1000, "heading": 0},
    {"x": 70, "y": 10, "z": 1000, "heading": 0},
    {"x": 90, "y": 10, "z": 1000, "heading": 0}
]
JSON successfully generated and output
```

## Вывод
- Весь вывод происходит через `System.out` и `System.err`
- Информационные сообщения выводятся в `stdout`
- Ошибки выводятся в `stderr`
- Простота и отсутствие внешних зависимостей
- **Режим отладки** — дополнительная информация о процессе построения координат (включается флагом `--debug`)
- **Централизованная система отладки** — все отладочные сообщения управляются через `DebugUtil` с префиксом `[DEBUG]`

## Структура проекта
```
src/main/java/ru/somsin/l2j/coordinator/
├── Application.java                  # Точка входа; координирует работу сервисов
├── builder/
│   └── RectangleBuilder.java         # Построение координат сетки (центры ячеек)
├── model/
│   ├── Coordinate.java               # Record координаты (x, y, z, heading)
│   └── RectangleInput.java           # Record входных параметров построения
├── service/
│   ├── InputService.java             # Чтение/парсинг пользовательского ввода
│   ├── CoordinateService.java        # Построение координат (исп. RectangleBuilder)
│   └── OutputService.java            # Формирование JSON-вывода (stdout)
└── util/
    ├── CoordinateUtil.java           # Утилиты для работы с координатами
    └── DebugUtil.java                # Централизованная система управления отладкой

src/main/resources/
└── (нет файлов конфигурации)

src/test/java/ru/somsin/l2j/coordinator/
├── service/
│   ├── InputServiceTest.java
│   ├── CoordinateServiceTest.java
│   └── OutputServiceTest.java
├── util/
│   └── DebugUtilTest.java            # Тесты централизованной системы отладки
└── RectangleBuilderTest.java
```